## 继承与组合的区别与联系

继承与组合都是面向对象中代码复用的方式。父类的内部细节对子类可见，其代码属于 **白盒式的复用**，而组合中，对象之间的内部细节不可见，其代码属于 **黑盒式复用**。继承在编码过程中就要指定具体的父类，其关系在 **编译期** 就确定，而组合的关系一般在 **运行时** 确定。继承强调的是 is-a 的关系，而组合强调的是 has-a 的关系。

## 继承与组合的优缺点

### 继承的优缺点

#### 优点：

- 支持扩展，通过继承父类实现，但会使系统结构较复杂
- 易于修改被复用的代码

#### 缺点：

- 代码白盒复用，父类的实现细节暴露给子类，破坏了封装性
- 当父类的实现代码修改时，可能使得子类也不得不修改，增加维护难度。
- 子类缺乏独立性，依赖于父类，耦合度较高
- 不支持动态拓展，在编译期就决定了父类

### 组合的优缺点

#### 优点：

- 代码黑盒复用，被包括的对象内部实现细节对外不可见，封装性好。
- 整体类与局部类之间松耦合，相互独立。
- 支持扩展
- 每个类只专注于一项任务
- 支持动态扩展，可在运行时根据具体对象选择不同类型的组合对象(扩展性比继承好)

#### 缺点：

- 创建整体类对象时，需要创建所有局部类对象。导致系统对象很多。

## 什么情况下使用继承，什么情况下使用组合

从前面的分析看，组合的优点明显多于继承，再加上 Java 中仅支持单继承。

所以：除非两个类之间是 is-a 的关系，否则尽量使用组合。

## 链接

[CSDN：继承和组合的区别](https://blog.csdn.net/zymx14/article/details/79605926#:~:text=%E7%BB%A7%E6%89%BF%E4%B8%8E%E7%BB%84%E5%90%88%E7%9A%84%E5%8C%BA%E5%88%AB,%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82&text=%E7%BB%A7%E6%89%BF%E5%9C%A8%E7%BC%96%E7%A0%81%E8%BF%87%E7%A8%8B%E4%B8%AD,%E6%98%AFhas%2Da%E7%9A%84%E5%85%B3%E7%B3%BB%E3%80%82)

[知乎：怎样理解“组合优于继承”以及“OO的反模块化”，在这些方面FP具体来说有什么优势？](https://www.zhihu.com/question/21862257)